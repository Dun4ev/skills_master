---
name: planning-work
description: Генерирует исчерпывающие планы реализации с небольшими задачами, шагами TDD и точными путями к файлам. Используйте, когда у пользователя есть спецификация или требования и ему нужен пошаговый план выполнения.
---

# Планирование работы (Planning Work)

## Когда использовать этот навык
- У вас есть спецификация или требования для многоэтапной задачи.
- Вы готовитесь к реализации фичи (режим EXECUTION).
- Вам нужно разбить большую задачу на атомарные, проверяемые шаги.

## Рабочий процесс (Workflow)
- [ ] Проанализируйте требования и контекст.
- [ ] Создайте файл `docs/plans/YYYY-MM-DD-<feature-name>.md`.
- [ ] Заполните заголовок плана (Goal, Architecture, Tech Stack).
- [ ] Разбейте работу на задачи (Task N).
- [ ] Для каждой задачи распишите шаги: Test -> Fail -> Implement -> Pass -> Commit.
- [ ] Предложите пользователю выбор способа выполнения (Subagent vs Parallel).

## Инструкции

Пишите подробные планы реализации, предполагая, что инженер имеет нулевой контекст. Документируйте все: какие файлы трогать, какой код писать, как тестировать.
Соблюдайте принципы: DRY, YAGNI, TDD, частые коммиты.

### Формат задачи (Task Granularity)

Каждый шаг — это одно действие (2-5 минут):
1.  "Написать падающий тест"
2.  "Запустить его, чтобы убедиться, что он падает"
3.  "Реализовать минимальный код для прохождения теста"
4.  "Запустить тесты и убедиться, что они проходят"
5.  "Закоммитить"

### Шаблон плана

**Каждый план ДОЛЖЕН начинаться с этого заголовка:**

```markdown
# [Feature Name] Implementation Plan

> **Для Агента:** REQUIRED SUB-SKILL: Используйте навык выполнения планов (executing-plans) для реализации этого плана задача за задачей.

**Цель:** [Одно предложение, описывающее, что мы строим]

**Архитектура:** [2-3 предложения о подходе]

**Техстек:** [Ключевые технологии/библиотеки]

---
```

### Структура задачи

```markdown
### Задача N: [Название компонента]

**Файлы:**
- Create: `exact/path/to/file.py`
- Modify: `exact/path/to/existing.py:123-145`
- Test: `tests/exact/path/to/test.py`

**Шаг 1: Написать падающий тест**

```python
def test_specific_behavior():
    result = function(input)
    assert result == expected
```

**Шаг 2: Запустить тест и убедиться, что он падает**

Run: `pytest tests/path/test.py::test_name -v`
Expected: FAIL with "function not defined"

**Шаг 3: Написать минимальную реализацию**

```python
def function(input):
    return expected
```

**Шаг 4: Запустить тест и убедиться, что он проходит**

Run: `pytest tests/path/test.py::test_name -v`
Expected: PASS

**Шаг 5: Закоммитить**

```bash
git add tests/path/test.py src/path/file.py
git commit -m "feat: add specific feature"
```
```

## Помни
- Всегда указывай **точные пути к файлам**.
- Полный код в плане (не "добавить валидацию", а сам код).
- Точные команды с ожидаемым выводом.
- Ссылайся на релевантные навыки.
